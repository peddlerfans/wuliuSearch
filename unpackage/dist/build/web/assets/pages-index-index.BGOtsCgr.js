import{_ as e,r as a,c as l,a as s,w as u,i as t,o as n,b as o,n as c,d as i,e as d,s as r,f as p,g as m,I as v,h as g,j as f,k as _,l as k}from"./index-l3yfvvcJ.js";import{r as h}from"./api.C0Evyluq.js";const y=e({__name:"index",setup(e){const y=a("customer"),b=a(!1),C=a(""),V=a("");function x(e){b.value=e.detail.value.includes("agree")}const j=l((()=>""!==V.value.trim()&&""!==C.value.trim()&&b.value));function w(e){d("user"===e?{url:"/pages/agreement/user"}:{url:"/pages/agreement/privacy"})}function I(){var e;(e={phone:V.value,password:C.value},h({method:"post",url:"/api/user/login",data:e})).then((e=>{200==e.code?(r("token",e.data.token),p({title:"登录成功",icon:"success"}),"employee"===y.value?(m({url:"/pages/staff/index"}),r("userType","employee")):(m({url:"/pages/userSearch/index"}),r("userType","customer"))):p({title:e.message||"登录失败",icon:"none"})})).catch((()=>{p({title:"网络错误，请稍后重试",icon:"none"})}))}return(e,a)=>{const l=t,d=v,r=g,p=f,m=_,h=k;return n(),s(l,{class:"login-content"},{default:u((()=>[o(l,{class:"login-tabs"},{default:u((()=>[o(l,{class:c(["login-tab",{active:"customer"===y.value}]),onClick:a[0]||(a[0]=e=>y.value="customer")},{default:u((()=>[i(" 客户登录 ")])),_:1},8,["class"]),o(l,{class:c(["login-tab",{active:"employee"===y.value}]),onClick:a[1]||(a[1]=e=>y.value="employee")},{default:u((()=>[i(" 员工登录 ")])),_:1},8,["class"])])),_:1}),o(l,{class:"login-form"},{default:u((()=>[o(d,{class:"login-input",type:"number",modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value=e),placeholder:"请输入手机号"},null,8,["modelValue"]),o(d,{class:"login-input",type:"password",modelValue:C.value,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value=e),placeholder:"请输入密码"},null,8,["modelValue"]),o(l,{class:"login-agreement"},{default:u((()=>[o(p,{onChange:x},{default:u((()=>[o(r,{value:"agree",checked:b.value},null,8,["checked"])])),_:1}),o(m,null,{default:u((()=>[i(" 我已阅读并同意 "),o(m,{class:"link",onClick:a[4]||(a[4]=e=>w("user"))},{default:u((()=>[i("《用户协议》")])),_:1}),i(" 和 "),o(m,{class:"link",onClick:a[5]||(a[5]=e=>w("privacy"))},{default:u((()=>[i("《隐私政策》")])),_:1})])),_:1})])),_:1}),o(h,{class:"login-btn",disabled:!j.value,onClick:I},{default:u((()=>[i(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1})}}},[["__scopeId","data-v-3dbd3266"]]);export{y as default};

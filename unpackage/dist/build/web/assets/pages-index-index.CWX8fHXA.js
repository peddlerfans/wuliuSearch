import{_ as e,r as a,f as l,c as s,w as n,i as u,o,a as t,b as c,n as i,v as r,s as d,x as p,I as m,p as v,q as g,m as f,d as _}from"./index-48tkzOBv.js";import{r as h}from"./api.BKjFQra2.js";const k=e({__name:"index",setup(e){const k=a("employee"),y=a(!1),b=a(""),x=a("");function V(e){y.value=e.detail.value.includes("agree")}const C=l((()=>""!==x.value.trim()&&""!==b.value.trim()&&y.value));function w(e){i("user"===e?{url:"/pages/agreement/user"}:{url:"/pages/agreement/privacy"})}function j(){var e;(e={phone:x.value,password:b.value},h({method:"post",url:"/api/user/login",data:e})).then((e=>{200==e.code?(r("token",e.data.token),d({title:"登录成功",icon:"success"}),"employee"===k.value?(p({url:"/pages/staff/index"}),r("userType","employee")):(p({url:"/pages/userSearch/index"}),r("userType","customer"))):d({title:e.message||"登录失败",icon:"none"})})).catch((()=>{d({title:"网络错误，请稍后重试",icon:"none"})}))}return(e,a)=>{const l=u,i=m,r=v,d=g,p=f,h=_;return o(),s(l,{class:"login-content"},{default:n((()=>[t(l,{class:"login-tabs"}),t(l,{class:"login-form"},{default:n((()=>[t(i,{class:"login-input",type:"number",modelValue:x.value,"onUpdate:modelValue":a[0]||(a[0]=e=>x.value=e),placeholder:"请输入手机号"},null,8,["modelValue"]),t(i,{class:"login-input",type:"password",modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e),placeholder:"请输入密码"},null,8,["modelValue"]),t(l,{class:"login-agreement"},{default:n((()=>[t(d,{onChange:V},{default:n((()=>[t(r,{value:"agree",checked:y.value},null,8,["checked"])])),_:1}),t(p,null,{default:n((()=>[c(" 我已阅读并同意 "),t(p,{class:"link",onClick:a[2]||(a[2]=e=>w("user"))},{default:n((()=>[c("《用户协议》")])),_:1}),c(" 和 "),t(p,{class:"link",onClick:a[3]||(a[3]=e=>w("privacy"))},{default:n((()=>[c("《隐私政策》")])),_:1})])),_:1})])),_:1}),t(h,{class:"login-btn",disabled:!C.value,onClick:j},{default:n((()=>[c(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1})}}},[["__scopeId","data-v-58054156"]]);export{k as default};

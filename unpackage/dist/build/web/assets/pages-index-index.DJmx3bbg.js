import{_ as e,r as a,c as l,a as s,w as n,i as u,o,b as t,d as c,n as i,s as r,e as d,f as p,I as m,g,h as v,j as f,k as _}from"./index-BBGbeg9X.js";import{r as h}from"./api.Cc_zTE61.js";const k=e({__name:"index",setup(e){const k=a("employee"),y=a(!1),b=a(""),V=a("");function x(e){y.value=e.detail.value.includes("agree")}const C=l((()=>""!==V.value.trim()&&""!==b.value.trim()&&y.value));function j(e){i("user"===e?{url:"/pages/agreement/user"}:{url:"/pages/agreement/privacy"})}function w(){var e;(e={phone:V.value,password:b.value},h({method:"post",url:"/api/user/login",data:e})).then((e=>{200==e.code?(r("token",e.data.token),d({title:"登录成功",icon:"success"}),"employee"===k.value?(p({url:"/pages/staff/index"}),r("userType","employee")):(p({url:"/pages/userSearch/index"}),r("userType","customer"))):d({title:e.message||"登录失败",icon:"none"})})).catch((()=>{d({title:"网络错误，请稍后重试",icon:"none"})}))}return(e,a)=>{const l=u,i=m,r=g,d=v,p=f,h=_;return o(),s(l,{class:"login-content"},{default:n((()=>[t(l,{class:"login-tabs"}),t(l,{class:"login-form"},{default:n((()=>[t(i,{class:"login-input",type:"number",modelValue:V.value,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value=e),placeholder:"请输入手机号"},null,8,["modelValue"]),t(i,{class:"login-input",type:"password",modelValue:b.value,"onUpdate:modelValue":a[1]||(a[1]=e=>b.value=e),placeholder:"请输入密码"},null,8,["modelValue"]),t(l,{class:"login-agreement"},{default:n((()=>[t(d,{onChange:x},{default:n((()=>[t(r,{value:"agree",checked:y.value},null,8,["checked"])])),_:1}),t(p,null,{default:n((()=>[c(" 我已阅读并同意 "),t(p,{class:"link",onClick:a[2]||(a[2]=e=>j("user"))},{default:n((()=>[c("《用户协议》")])),_:1}),c(" 和 "),t(p,{class:"link",onClick:a[3]||(a[3]=e=>j("privacy"))},{default:n((()=>[c("《隐私政策》")])),_:1})])),_:1})])),_:1}),t(h,{class:"login-btn",disabled:!C.value,onClick:w},{default:n((()=>[c(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1})}}},[["__scopeId","data-v-58054156"]]);export{k as default};

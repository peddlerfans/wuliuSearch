import{_ as e,r as a,c as l,a as s,w as t,i as n,o as u,b as o,n as c,d as i,e as d,s as r,f as p,g as m,I as v,h as f,j as g,k as _,l as k}from"./index-Btepo-jy.js";import{r as h}from"./api.DuMj0eHO.js";const b=e({__name:"index",setup(e){const b=a("customer"),y=a(!1),C=a(""),V=a("");function x(e){y.value=e.detail.value.includes("agree")}const j=l((()=>""!==V.value.trim()&&""!==C.value.trim()&&y.value));function w(e){d("user"===e?{url:"/pages/agreement/user"}:{url:"/pages/agreement/privacy"})}function I(){var e;(e={phone:V.value,password:C.value},h({method:"post",url:"/api/user/login",data:e})).then((e=>{200==e.code?(r("token",e.data.token),p({title:"登录成功",icon:"success"}),m({url:"/pages/staff/index"})):p({title:e.message||"登录失败",icon:"none"})})).catch((()=>{p({title:"网络错误，请稍后重试",icon:"none"})}))}return(e,a)=>{const l=n,d=v,r=f,p=g,m=_,h=k;return u(),s(l,{class:"login-content"},{default:t((()=>[o(l,{class:"login-tabs"},{default:t((()=>[o(l,{class:c(["login-tab",{active:"customer"===b.value}]),onClick:a[0]||(a[0]=e=>b.value="customer")},{default:t((()=>[i(" 客户登录 ")])),_:1},8,["class"]),o(l,{class:c(["login-tab",{active:"employee"===b.value}]),onClick:a[1]||(a[1]=e=>b.value="employee")},{default:t((()=>[i(" 员工登录 ")])),_:1},8,["class"])])),_:1}),o(l,{class:"login-form"},{default:t((()=>[o(d,{class:"login-input",type:"number",modelValue:V.value,"onUpdate:modelValue":a[2]||(a[2]=e=>V.value=e),placeholder:"请输入手机号"},null,8,["modelValue"]),o(d,{class:"login-input",type:"password",modelValue:C.value,"onUpdate:modelValue":a[3]||(a[3]=e=>C.value=e),placeholder:"请输入密码"},null,8,["modelValue"]),o(l,{class:"login-agreement"},{default:t((()=>[o(p,{onChange:x},{default:t((()=>[o(r,{value:"agree",checked:y.value},null,8,["checked"])])),_:1}),o(m,null,{default:t((()=>[i(" 我已阅读并同意 "),o(m,{class:"link",onClick:a[4]||(a[4]=e=>w("user"))},{default:t((()=>[i("《用户协议》")])),_:1}),i(" 和 "),o(m,{class:"link",onClick:a[5]||(a[5]=e=>w("privacy"))},{default:t((()=>[i("《隐私政策》")])),_:1})])),_:1})])),_:1}),o(h,{class:"login-btn",disabled:!j.value,onClick:I},{default:t((()=>[i(" 登录 ")])),_:1},8,["disabled"])])),_:1})])),_:1})}}},[["__scopeId","data-v-9a0d6dca"]]);export{b as default};

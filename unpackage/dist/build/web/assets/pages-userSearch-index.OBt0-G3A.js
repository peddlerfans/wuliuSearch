import{_ as e,r as a,a as l,w as s,i as t,o as u,b as d,d as c,t as n,u as o,n as v,p as i,q as r,F as _,f,I as m,l as p,k as h,j as k,D as b,E as g,h as V}from"./index-l3yfvvcJ.js";import{a as x,c as y}from"./staff.BAYZVc4t.js";import"./api.C0Evyluq.js";const w=e({__name:"index",setup(e){const w=a(""),j=a(null),C=a([]),U=a([]),I=a(""),S=a(""),q=a(""),D=async()=>{w.value?x({trade_no:w.value}).then((e=>{200==e.code||0==e.code?(j.value=e.data,C.value=j.value.products||[],I.value=j.value.remark||"",S.value=j.value.dept_name||"",q.value=j.value.consignee_name||"",U.value=[]):(f({title:e.msg||"查询失败",icon:"none"}),j.value=null,C.value=[],I.value="",S.value="",q.value="",U.value=[])})).catch((e=>{console.log(e)})):f({title:"请输入运单号",icon:"none"})},E=()=>{S.value?q.value?U.value.length?y({trade_no:w.value,check_ids:U.value.join(","),remark:I.value,dept_name:S.value,consignee_name:q.value}).then((e=>{200==e.code||0==e.code?(f({title:"确认成功",icon:"success"}),j.value=e.data,C.value=e.data.products||[],I.value=e.data.remark||"",S.value=e.data.dept_name||"",q.value=e.data.consignee_name||"",U.value=[]):f({title:e.msg||"确认失败",icon:"none"})})).catch((e=>{console.log(e)})):f({title:"请选择产品",icon:"none"}):f({title:"请输入签收人",icon:"none"}):f({title:"请输入部门",icon:"none"})},F=()=>{f({title:"已取消",icon:"none"})};return(e,a)=>{const f=m,x=p,y=t,z=h,A=V,B=k,G=b;return u(),l(y,{class:"container"},{default:s((()=>[j.value?n("",!0):(u(),l(y,{key:0,class:"search-bar"},{default:s((()=>[d(f,{modelValue:w.value,"onUpdate:modelValue":a[0]||(a[0]=e=>w.value=e),placeholder:"请输入运单号",class:"input"},null,8,["modelValue"]),d(x,{onClick:D,class:"search-btn"},{default:s((()=>[c("查询")])),_:1})])),_:1})),j.value?(u(),l(y,{key:1,class:"result-section"},{default:s((()=>[d(y,{class:"header"},{default:s((()=>[d(y,{class:"left"},{default:s((()=>[c(" 运单号："+o(j.value.trade_no),1)])),_:1}),d(y,{class:v(["right",{signed:2===j.value.status,unsigned:2!==j.value.status}])},{default:s((()=>[c(o(2===j.value.status?"已签收":"待签收"),1)])),_:1},8,["class"])])),_:1}),d(y,{class:"receiver-info"},{default:s((()=>[d(z,null,{default:s((()=>[c(o(j.value.consignee_name||"-"),1)])),_:1}),d(z,{style:{"margin-left":"16rpx"}},{default:s((()=>[c("电话："+o(j.value.consignee_phone||"-"),1)])),_:1})])),_:1}),d(y,{class:"product-table"},{default:s((()=>[d(y,{class:"table-header"},{default:s((()=>[d(y,{class:"th checkbox-th"}),d(y,{class:"th"},{default:s((()=>[c("产品型号")])),_:1}),d(y,{class:"th"},{default:s((()=>[c("技术规范")])),_:1}),d(y,{class:"th"},{default:s((()=>[c("数量")])),_:1}),d(y,{class:"th"},{default:s((()=>[c("单位")])),_:1})])),_:1}),d(B,{modelValue:U.value,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value=e),onChange:a[3]||(a[3]=e=>U.value=e.detail.value)},{default:s((()=>[(u(!0),i(_,null,r(C.value,((e,t)=>(u(),l(y,{class:"table-row",key:e.id},{default:s((()=>[d(y,{class:"td checkbox-td"},{default:s((()=>[d(A,{value:String(e.id),disabled:2==j.value.status,checked:2==j.value.status?1==e.status:U.value.includes(String(e.id)),class:"checkbox",onClick:a[1]||(a[1]=g((()=>{}),["stop"]))},null,8,["value","disabled","checked"])])),_:2},1024),d(y,{class:"td"},{default:s((()=>[c(o(e.product_model),1)])),_:2},1024),d(y,{class:"td"},{default:s((()=>[c(o(e.technical_spec),1)])),_:2},1024),d(y,{class:"td"},{default:s((()=>[c(o(e.product_num),1)])),_:2},1024),d(y,{class:"td"},{default:s((()=>[c(o(e.product_unit),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["modelValue"])])),_:1}),d(y,{class:"extra-info"},{default:s((()=>[d(y,{class:"extra-row"},{default:s((()=>[d(z,{class:"label"},{default:s((()=>[c("remark：")])),_:1}),2!==j.value.status?(u(),l(G,{key:0,modelValue:I.value,"onUpdate:modelValue":a[4]||(a[4]=e=>I.value=e),class:"editable remark-textarea",placeholder:"请输入",rows:"4"},null,8,["modelValue"])):(u(),l(z,{key:1},{default:s((()=>[c(o(I.value||"-"),1)])),_:1}))])),_:1}),d(y,{class:"extra-row"},{default:s((()=>[d(z,{class:"label"},{default:s((()=>[c("部门：")])),_:1}),2!==j.value.status?(u(),l(f,{key:0,modelValue:S.value,"onUpdate:modelValue":a[5]||(a[5]=e=>S.value=e),class:"editable",placeholder:"请输入"},null,8,["modelValue"])):(u(),l(z,{key:1},{default:s((()=>[c(o(S.value),1)])),_:1}))])),_:1}),d(y,{class:"extra-row"},{default:s((()=>[d(z,{class:"label"},{default:s((()=>[c("签收人：")])),_:1}),2!==j.value.status?(u(),l(f,{key:0,modelValue:q.value,"onUpdate:modelValue":a[6]||(a[6]=e=>q.value=e),class:"editable",placeholder:"请输入"},null,8,["modelValue"])):(u(),l(z,{key:1},{default:s((()=>[c(o(q.value),1)])),_:1}))])),_:1})])),_:1}),2!==j.value.status?(u(),l(y,{key:0,class:"action-btns"},{default:s((()=>[d(x,{class:"confirm-btn",onClick:E},{default:s((()=>[c("确定")])),_:1}),d(x,{class:"cancel-btn",onClick:F},{default:s((()=>[c("取消")])),_:1})])),_:1})):n("",!0)])),_:1})):n("",!0)])),_:1})}}},[["__scopeId","data-v-0a92c8b0"]]);export{w as default};
